@{
    ViewBag.Title = "Xchanges";
}

<head>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.6/angular.min.js"></script>
</head>

<body ng-app="xchange">
	<div ng-controller="testController">
		<h2>Xchanges</h2>
		My name is ={{myVar}}
	</div>




	<script>
		var xchange = angular.module('xchange', []);

		// модуль для ng-app мне пока не нужен
		xchange.controller('testController', ['$scope', '$http', '$q', function ($scope, $http, $q) {
			$scope.myVar = "Alex Kharchenko";

			var testQueryFor = "https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20(%22USDRUB%22)%20&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=";

			var res = performGetQuery(testQueryFor);

			function performGetQuery(path) {

				var deferred = $q.defer();
				$http.get(path)
					.success(function (data) {
						deferred.resolve(data);
					})
					.error(function (err) {
						deferred.reject(err);
					});

				return deferred.promise;
			}
		}]);
		
		//var phonecatApp = angular.module('phonecatApp', []);

		//phonecatApp.controller('PhoneListCtrl', ['$scope', '$http', function ($scope, $http) {
		//	$scope.myVar = "Alex Kharchenko";
		//	$http.get('phones/phones.json').success(function (data) {
		//		$scope.phones = data;
		//	});

		//	$scope.orderProp = 'age';
		//}]);
		


	</script>
</body>


